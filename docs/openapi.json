{"openapi":"3.1.0","info":{"title":"SKAX Physical Risk AI Agent API","description":"\n    사업장 기후 물리적 리스크 AI Agent 분석 시스템 API\n\n    Spring Boot 서버로부터 요청을 받아 AI Agent를 통해 기후 리스크를 분석하고 결과를 반환합니다.\n\n    주요 기능:\n    - AI Agent 기반 물리적 리스크 분석\n    - 비동기 작업 처리 및 상태 관리\n    - 과거 재난 이력 분석\n    - SSP 시나리오별 미래 리스크 전망\n    - 재무 영향 분석 (AAL)\n    - 취약성 평가\n    - 사업장 이전 시뮬레이션\n    - LLM 기반 리포트 생성\n    - 사용자 제공 추가 데이터 관리\n    ","version":"1.0.0"},"paths":{"/api/analysis/start":{"post":{"tags":["Analysis"],"summary":"Start Analysis","description":"AI 리스크 분석 시작 - site.id는 request body에 포함","operationId":"start_analysis_api_analysis_start_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartAnalysisRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisJobStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/enhance":{"post":{"tags":["Analysis"],"summary":"Enhance Analysis","description":"추가 데이터를 반영하여 분석 향상\n\n기존 분석 결과(job_id)에 추가 데이터를 반영하여 Node 5 이후 재실행.\nNode 1~4 (ModelOps 데이터)는 캐시 재사용하여 효율적으로 실행.","operationId":"enhance_analysis_api_analysis_enhance_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnhanceAnalysisRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisJobStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/status":{"get":{"tags":["Analysis"],"summary":"Get Analysis Status","description":"분석 작업 상태 조회 - query parameters 사용","operationId":"get_analysis_status_api_analysis_status_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"jobId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Jobid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisJobStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/physical-risk-scores":{"get":{"tags":["Analysis"],"summary":"Get Physical Risk Scores","description":"시나리오별 물리적 리스크 점수 조회 - query parameters 사용","operationId":"get_physical_risk_scores_api_analysis_physical_risk_scores_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"hazardType","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hazardtype"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhysicalRiskScoreResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/past-events":{"get":{"tags":["Analysis"],"summary":"Get Past Events","description":"과거 재난 이력 조회 - query parameters 사용","operationId":"get_past_events_api_analysis_past_events_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PastEventsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/financial-impacts":{"get":{"tags":["Analysis"],"summary":"Get Financial Impacts","description":"시나리오별 재무 영향(AAL) 조회 - query parameters 사용","operationId":"get_financial_impacts_api_analysis_financial_impacts_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinancialImpactResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/vulnerability":{"get":{"tags":["Analysis"],"summary":"Get Vulnerability","description":"취약성 분석 - query parameters 사용","operationId":"get_vulnerability_api_analysis_vulnerability_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VulnerabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/total":{"get":{"tags":["Analysis"],"summary":"Get Total Analysis","description":"특정 Hazard 기준 통합 분석 결과 - query parameters 사용","operationId":"get_total_analysis_api_analysis_total_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"hazardType","in":"query","required":true,"schema":{"type":"string","title":"Hazardtype"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisTotalResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports":{"post":{"tags":["Reports"],"summary":"Create Report","description":"Spring Boot API 호환 - 리포트 생성","operationId":"create_report_api_reports_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReportRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Reports"],"summary":"Delete Report","description":"Spring Boot API 호환 - 리포트 삭제","operationId":"delete_report_api_reports_delete","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports/web":{"get":{"tags":["Reports"],"summary":"Get Report Web View","description":"웹 리포트 뷰 조회 - 프론트엔드 렌더링용 데이터 반환 - query parameters 사용\n\nArgs:\n    report_id: 리포트 ID (create_report에서 반환된 reportId)\n\nReturns:\n    {\n        \"siteId\": \"...\",\n        \"reportData\": {\n            \"markdown\": \"# 리포트 텍스트...\",\n            \"json\": {...},\n            \"metadata\": {...}\n        },\n        \"createdAt\": \"2025-12-03T...\"\n    }","operationId":"get_report_web_view_api_reports_web_get","parameters":[{"name":"reportId","in":"query","required":true,"schema":{"type":"string","title":"Reportid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports/pdf":{"get":{"tags":["Reports"],"summary":"Get Report Pdf","description":"PDF 리포트 다운로드 - query parameters 사용\n\nArgs:\n    report_id: 리포트 ID (create_report에서 반환된 reportId)\n\nReturns:\n    PDF 파일 (FileResponse)","operationId":"get_report_pdf_api_reports_pdf_get","parameters":[{"name":"reportId","in":"query","required":true,"schema":{"type":"string","title":"Reportid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/simulation/relocation/compare":{"post":{"tags":["Simulation"],"summary":"Compare Relocation","description":"Spring Boot API 호환 - 사업장 이전 시뮬레이션 (비교)","operationId":"compare_relocation_api_simulation_relocation_compare_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RelocationSimulationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RelocationSimulationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/simulation/climate":{"post":{"tags":["Simulation"],"summary":"Run Climate Simulation","description":"Spring Boot API 호환 - 기후 시뮬레이션","operationId":"run_climate_simulation_api_simulation_climate_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClimateSimulationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClimateSimulationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/meta/hazards":{"get":{"tags":["Meta"],"summary":"Get Hazards","description":"지원하는 기후 리스크(위험요인) 목록","operationId":"get_hazards_api_v1_meta_hazards_get","parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"enum":["temperature","water","wind","other"],"title":"Category"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HazardTypeInfo"},"title":"Response Get Hazards Api V1 Meta Hazards Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/health":{"get":{"tags":["Meta"],"summary":"Health Check","description":"헬스체크","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/api/recommendation/batch/start":{"post":{"tags":["Site Recommendation"],"summary":"Start Batch Recommendation","description":"후보지 추천 배치 작업 시작\n\n전체 격자에 대해 E, V, AAL을 계산하여 리스크가 가장 낮은 상위 N개 격자를 추천합니다.\n\n**처리 흐름**:\n1. ModelOps API에 배치 작업 요청\n2. 배치 작업 ID 반환 (202 Accepted)\n3. 클라이언트는 진행 상태 조회 API를 폴링\n4. 완료 후 결과 조회 API로 추천 후보지 목록 획득\n\n**예상 소요 시간**: 약 30분 (10,000개 격자 기준)","operationId":"start_batch_recommendation_api_recommendation_batch_start_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SiteRecommendationRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SiteRecommendationBatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommendation/batch/progress":{"get":{"tags":["Site Recommendation"],"summary":"Get Batch Progress","description":"배치 작업 진행 상태 조회 - query parameters 사용\n\n**폴링 권장 간격**: 5초\n\n**진행률 예시**:\n- 10%: 1,000개 격자 완료\n- 30%: 3,000개 격자 완료\n- 50%: 5,000개 격자 완료\n- 70%: 7,000개 격자 완료\n- 90%: 9,000개 격자 완료\n- 100%: 전체 완료 (결과 조회 가능)","operationId":"get_batch_progress_api_recommendation_batch_progress_get","parameters":[{"name":"batchId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Batchid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchProgressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommendation/batch/result":{"get":{"tags":["Site Recommendation"],"summary":"Get Batch Result","description":"배치 작업 완료 후 결과 조회 - query parameters 사용\n\n**주의**: 배치 작업이 완료(100%)된 후에만 결과를 조회할 수 있습니다.\n\n**응답 내용**:\n- 추천 후보지 목록 (상위 N개, 요청 시 지정한 top_n 개수)\n- 격자별 H, E, V, AAL 점수\n- 종합 리스크 점수 (낮을수록 좋음)\n- 예상 손실액","operationId":"get_batch_result_api_recommendation_batch_result_get","parameters":[{"name":"batchId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Batchid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SiteRecommendationResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommendation/batch":{"delete":{"tags":["Site Recommendation"],"summary":"Cancel Batch Job","description":"배치 작업 취소 - query parameters 사용\n\n**주의**: 이미 완료된 작업은 취소할 수 없습니다.","operationId":"cancel_batch_job_api_recommendation_batch_delete","parameters":[{"name":"batchId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Batchid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/additional-data":{"post":{"tags":["Additional Data"],"summary":"Upload Additional Data","description":"추가 데이터 업로드 - siteId는 request body에 포함\n\n카테고리별로 데이터를 저장합니다:\n- building: 건물 정보\n- asset: 자산 정보\n- power: 전력 사용량 정보\n- insurance: 보험 정보\n- custom: 기타 사용자 정의 데이터","operationId":"upload_additional_data_api_additional_data_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdditionalDataUploadRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdditionalDataUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Additional Data"],"summary":"Get Additional Data","description":"추가 데이터 조회 - query parameters 사용","operationId":"get_additional_data_api_additional_data_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"dataCategory","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/DataCategory"},{"type":"null"}],"title":"Datacategory"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdditionalDataGetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Additional Data"],"summary":"Delete Additional Data","description":"추가 데이터 삭제 - query parameters 사용","operationId":"delete_additional_data_api_additional_data_delete","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"dataCategory","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/DataCategory"},{"type":"null"}],"title":"Datacategory"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/additional-data/all":{"get":{"tags":["Additional Data"],"summary":"Get All Additional Data","description":"모든 카테고리 추가 데이터 조회 - query parameters 사용","operationId":"get_all_additional_data_api_additional_data_all_get","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdditionalDataGetResponse"},"title":"Response Get All Additional Data Api Additional Data All Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/additional-data/file":{"post":{"tags":["Additional Data"],"summary":"Upload Additional Data File","description":"추가 데이터 파일 업로드 - query parameters로 siteId, dataCategory 전달","operationId":"upload_additional_data_file_api_additional_data_file_post","parameters":[{"name":"siteId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Siteid"}},{"name":"dataCategory","in":"query","required":true,"schema":{"$ref":"#/components/schemas/DataCategory"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_additional_data_file_api_additional_data_file_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdditionalDataUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/disaster-history":{"get":{"tags":["Disaster History"],"summary":"Get Disaster History","description":"재해이력 목록 조회\n\n- **site_id**: 사업장 ID로 필터링 (선택)\n- **disaster_type**: 재해 유형으로 필터링 (선택)\n- **severity**: 심각도로 필터링 (선택)\n- **start_date**: 시작 날짜 이후 발생한 재해만 조회 (선택)\n- **end_date**: 종료 날짜 이전 발생한 재해만 조회 (선택)\n- **limit**: 한 번에 조회할 개수 (기본: 100, 최대: 1000)\n- **offset**: 조회 시작 위치 (페이징용, 기본: 0)\n\nReturns:\n    전체 재해이력 수와 필터링된 재해이력 목록","operationId":"get_disaster_history_api_disaster_history_get","parameters":[{"name":"siteId","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"사업장 ID로 필터링","title":"Siteid"},"description":"사업장 ID로 필터링"},{"name":"disasterType","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/HazardType"},{"type":"null"}],"description":"재해 유형으로 필터링","title":"Disastertype"},"description":"재해 유형으로 필터링"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/DisasterSeverity"},{"type":"null"}],"description":"심각도로 필터링","title":"Severity"},"description":"심각도로 필터링"},{"name":"startDate","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"시작 날짜 (이후 발생)","title":"Startdate"},"description":"시작 날짜 (이후 발생)"},{"name":"endDate","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"종료 날짜 (이전 발생)","title":"Enddate"},"description":"종료 날짜 (이전 발생)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"조회 개수 제한","default":100,"title":"Limit"},"description":"조회 개수 제한"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"조회 시작 위치","default":0,"title":"Offset"},"description":"조회 시작 위치"},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisasterHistoryListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/disaster-history/detail":{"get":{"tags":["Disaster History"],"summary":"Get Disaster By Id","description":"특정 재해이력 상세 조회 - query parameters 사용\n\n- **disaster_id**: 재해이력 ID\n\nReturns:\n    재해이력 상세 정보","operationId":"get_disaster_by_id_api_disaster_history_detail_get","parameters":[{"name":"disasterId","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Disasterid"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisasterHistoryRecord"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/disaster-history/statistics/summary":{"get":{"tags":["Disaster History"],"summary":"Get Disaster Statistics","description":"재해 통계 조회\n\n- **site_id**: 사업장 ID로 필터링 (None이면 전체 통계)\n\nReturns:\n    재해 통계 (총 건수, 총 피해액, 인명피해, 유형별/심각도별 통계)","operationId":"get_disaster_statistics_api_disaster_history_statistics_summary_get","parameters":[{"name":"siteId","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"사업장 ID (전체 통계는 생략)","title":"Siteid"},"description":"사업장 ID (전체 통계는 생략)"},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisasterStatistics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/summary":{"get":{"tags":["Dashboard"],"summary":"Get Dashboard Summary","description":"대시보드 요약 정보 조회\n\n전체 사업장의 통합 리스크 점수와 주요 기후 리스크를 반환합니다.","operationId":"get_dashboard_summary_api_dashboard_summary_get","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"루트 경로 - API 테스트 콘솔로 리다이렉트","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AdditionalDataGetResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"레코드 ID"},"siteId":{"type":"string","format":"uuid","title":"Siteid"},"dataCategory":{"$ref":"#/components/schemas/DataCategory"},"rawText":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rawtext"},"structuredData":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Structureddata"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"fileName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"fileS3Key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Files3Key"},"fileSize":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Filesize"},"fileMimeType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filemimetype"},"uploadedBy":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Uploadedby"},"uploadedAt":{"type":"string","format":"date-time","title":"Uploadedat"},"expiresAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expiresat"}},"type":"object","required":["id","siteId","dataCategory","uploadedAt"],"title":"AdditionalDataGetResponse","description":"추가 데이터 조회 응답 (ERD site_additional_data 기준)"},"AdditionalDataInput":{"properties":{"rawText":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rawtext","description":"자유 형식 텍스트 (사용자 제공)"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"메타데이터 (선택)"},"buildingInfo":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Buildinginfo","description":"건물 정보 (building_age, building_type, seismic_design, gross_floor_area 등)"},"assetInfo":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Assetinfo","description":"자산 정보 (floor_area, asset_value, employee_count 등)"},"powerUsage":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Powerusage","description":"전력 사용량 (it_power_kwh, cooling_power_kwh, total_power_kwh 등)"},"insurance":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Insurance","description":"보험 정보 (coverage_rate 등)"}},"type":"object","title":"AdditionalDataInput","description":"추가 데이터 입력 (사용자 제공 컨텍스트)"},"AdditionalDataUploadRequest":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"dataCategory":{"$ref":"#/components/schemas/DataCategory","description":"데이터 카테고리"},"rawText":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rawtext","description":"자유 형식 텍스트"},"structuredData":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Structureddata","description":"정형화된 JSONB 데이터"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"추가 메타데이터"},"fileName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename","description":"업로드 파일명"},"fileS3Key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Files3Key","description":"S3 저장 키"},"fileSize":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Filesize","description":"파일 크기 (bytes)"},"fileMimeType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filemimetype","description":"MIME 타입"},"expiresAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expiresat","description":"만료 시점"}},"type":"object","required":["siteId","dataCategory"],"title":"AdditionalDataUploadRequest","description":"추가 데이터 업로드 요청 (ERD site_additional_data 기준)"},"AdditionalDataUploadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"레코드 ID"},"siteId":{"type":"string","format":"uuid","title":"Siteid"},"dataCategory":{"$ref":"#/components/schemas/DataCategory"},"uploadedAt":{"type":"string","format":"date-time","title":"Uploadedat"},"message":{"type":"string","title":"Message","default":"Additional data uploaded successfully"}},"type":"object","required":["id","siteId","dataCategory","uploadedAt"],"title":"AdditionalDataUploadResponse","description":"추가 데이터 업로드 응답"},"AnalysisJobStatus":{"properties":{"jobId":{"type":"string","format":"uuid","title":"Jobid"},"siteId":{"type":"string","format":"uuid","title":"Siteid"},"status":{"type":"string","title":"Status"},"progress":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Progress"},"currentNode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currentnode"},"currentHazard":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currenthazard"},"startedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Startedat"},"completedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completedat"},"estimatedCompletionTime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimatedcompletiontime"},"error":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Error"}},"type":"object","required":["jobId","siteId","status","progress"],"title":"AnalysisJobStatus"},"AnalysisOptions":{"properties":{"includeFinancialImpact":{"type":"boolean","title":"Includefinancialimpact","default":true},"includeVulnerability":{"type":"boolean","title":"Includevulnerability","default":true},"includePastEvents":{"type":"boolean","title":"Includepastevents","default":true},"sspScenarios":{"items":{"$ref":"#/components/schemas/SSPScenario"},"type":"array","title":"Sspscenarios","default":["SSP2-4.5","SSP5-8.5"]}},"type":"object","title":"AnalysisOptions"},"AnalysisTotalResponse":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"siteName":{"type":"string","title":"Sitename","description":"사업장 이름"},"physicalRisks":{"items":{"$ref":"#/components/schemas/PhysicalRiskBarItem"},"type":"array","title":"Physicalrisks","description":"9대 물리적 리스크 분석 결과"}},"type":"object","required":["siteId","siteName","physicalRisks"],"title":"AnalysisTotalResponse","description":"Spring Boot API 호환 - 사업장 상세 분석 결과"},"BatchProgressResponse":{"properties":{"batchId":{"type":"string","format":"uuid","title":"Batchid"},"jobType":{"$ref":"#/components/schemas/JobType"},"status":{"$ref":"#/components/schemas/BatchStatus"},"progress":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Progress","description":"진행률 (%)"},"totalItems":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Totalitems","description":"전체 항목 수"},"completedItems":{"type":"integer","title":"Completeditems","description":"완료 항목 수"},"failedItems":{"type":"integer","title":"Faileditems","description":"실패 항목 수"},"startedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Startedat"},"completedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completedat"},"estimatedDurationMinutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimateddurationminutes"},"actualDurationSeconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Actualdurationseconds"},"errorMessage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Errormessage"}},"type":"object","required":["batchId","jobType","status","progress","completedItems","failedItems"],"title":"BatchProgressResponse","description":"배치 작업 진행 상태 응답 (ERD batch_jobs 기반)","example":{"batchId":"550e8400-e29b-41d4-a716-446655440000","completedItems":4500,"estimatedDurationMinutes":30,"failedItems":10,"jobType":"site_recommendation","progress":45,"startedAt":"2025-12-01T10:30:00Z","status":"running","totalItems":10000}},"BatchStatus":{"type":"string","enum":["queued","running","completed","failed","cancelled"],"title":"BatchStatus","description":"배치 작업 상태 (ERD batch_jobs 테이블 기준)"},"Body_upload_additional_data_file_api_additional_data_file_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_additional_data_file_api_additional_data_file_post"},"ClimateSimulationRequest":{"properties":{"scenario":{"$ref":"#/components/schemas/SSPScenario","description":"SSP 시나리오"},"hazardType":{"type":"string","title":"Hazardtype","description":"위험 유형"},"siteIds":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Siteids","description":"시뮬레이션 대상 사업장 ID 목록"},"startYear":{"type":"integer","title":"Startyear","description":"시작 연도"}},"type":"object","required":["scenario","hazardType","siteIds","startYear"],"title":"ClimateSimulationRequest","description":"Spring Boot API 호환 - 기후 시뮬레이션 요청"},"ClimateSimulationResponse":{"properties":{"scenario":{"$ref":"#/components/schemas/SSPScenario","description":"SSP 시나리오"},"riskType":{"type":"string","title":"Risktype","description":"리스크 유형"},"yearlyData":{"items":{"$ref":"#/components/schemas/YearlyData"},"type":"array","title":"Yearlydata","description":"연도별 시뮬레이션 데이터"}},"type":"object","required":["scenario","riskType","yearlyData"],"title":"ClimateSimulationResponse","description":"Spring Boot API 호환 - 기후 시뮬레이션 결과"},"CreateReportRequest":{"properties":{"siteId":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Siteid","description":"사업장 ID (null이면 전체 사업장 리포트)"},"language":{"anyOf":[{"$ref":"#/components/schemas/ReportLanguage"},{"type":"null"}],"description":"보고서 언어 (ko: 한국어, en: 영어)","default":"ko"}},"type":"object","title":"CreateReportRequest","description":"Spring Boot API 호환 - 리포트 생성 요청"},"DashboardSummaryResponse":{"properties":{"mainClimateRisk":{"type":"string","title":"Mainclimaterisk","description":"전체 사업장의 주요 기후 리스크"},"sites":{"items":{"$ref":"#/components/schemas/SiteSummary"},"type":"array","title":"Sites","description":"사업장 목록"}},"type":"object","required":["mainClimateRisk","sites"],"title":"DashboardSummaryResponse","description":"대시보드 요약 정보"},"DataCategory":{"type":"string","enum":["building","asset","power","insurance","custom"],"title":"DataCategory","description":"데이터 카테고리 (ERD 기준)"},"DisasterEvent":{"properties":{"disasterType":{"type":"string","title":"Disastertype","description":"재난 유형"},"year":{"type":"integer","title":"Year","description":"발생 연도"},"warningDays":{"type":"integer","title":"Warningdays","description":"주의 일수"},"severeDays":{"type":"integer","title":"Severedays","description":"심각 일수"},"overallStatus":{"type":"string","enum":["경미","주의","심각"],"title":"Overallstatus","description":"통합 상태"}},"type":"object","required":["disasterType","year","warningDays","severeDays","overallStatus"],"title":"DisasterEvent","description":"재난 이벤트"},"DisasterHistoryListResponse":{"properties":{"total":{"type":"integer","title":"Total","description":"전체 재해이력 수"},"data":{"items":{"$ref":"#/components/schemas/DisasterHistoryRecord"},"type":"array","title":"Data","description":"재해이력 목록"}},"type":"object","required":["total","data"],"title":"DisasterHistoryListResponse","description":"재해이력 목록 응답"},"DisasterHistoryRecord":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"재해이력 ID"},"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"disasterType":{"$ref":"#/components/schemas/HazardType","description":"재해 유형"},"occurredAt":{"type":"string","format":"date-time","title":"Occurredat","description":"발생 일시"},"severity":{"$ref":"#/components/schemas/DisasterSeverity","description":"심각도"},"damageAmount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Damageamount","description":"피해 금액 (원)"},"casualties":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Casualties","description":"인명 피해 (명)"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"상세 설명"},"recoveryDuration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Recoveryduration","description":"복구 기간 (일)"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location","description":"발생 위치"},"weatherCondition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Weathercondition","description":"기상 상황"},"createdAt":{"type":"string","format":"date-time","title":"Createdat","description":"생성 일시"},"updatedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updatedat","description":"수정 일시"}},"type":"object","required":["id","siteId","disasterType","occurredAt","severity"],"title":"DisasterHistoryRecord","description":"재해이력 레코드 (사용자 정의 이력)"},"DisasterSeverity":{"type":"string","enum":["경미","보통","심각","대재해"],"title":"DisasterSeverity","description":"재해 심각도 (ERD api_disaster_yearbook 기준)"},"DisasterStatistics":{"properties":{"totalDisasters":{"type":"integer","title":"Totaldisasters","description":"총 재해 건수"},"totalDamage":{"type":"number","title":"Totaldamage","description":"총 피해 금액 (원)"},"totalCasualties":{"type":"integer","title":"Totalcasualties","description":"총 인명 피해 (명)"},"mostCommonType":{"anyOf":[{"$ref":"#/components/schemas/HazardType"},{"type":"null"}],"description":"가장 빈번한 재해 유형"},"byType":{"additionalProperties":true,"type":"object","title":"Bytype","description":"재해 유형별 통계"},"bySeverity":{"additionalProperties":true,"type":"object","title":"Byseverity","description":"심각도별 통계"}},"type":"object","required":["totalDisasters","totalDamage","totalCasualties"],"title":"DisasterStatistics","description":"재해 통계"},"EnhanceAnalysisRequest":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"jobId":{"type":"string","format":"uuid","title":"Jobid","description":"원본 분석 작업 ID"},"additionalData":{"$ref":"#/components/schemas/AdditionalDataInput","description":"추가 데이터 (필수)"}},"type":"object","required":["siteId","jobId","additionalData"],"title":"EnhanceAnalysisRequest","description":"추가 데이터를 반영하여 분석 향상"},"FinancialImpactResponse":{"properties":{"scenarios":{"items":{"$ref":"#/components/schemas/SSPScenarioImpact"},"type":"array","title":"Scenarios","description":"SSP 시나리오별 재무 영향 목록 (4개 시나리오)"}},"type":"object","required":["scenarios"],"title":"FinancialImpactResponse","description":"Spring Boot API 호환 - 시나리오별 재무 영향 분석"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HazardType":{"type":"string","enum":["태풍","내륙침수","해안침수","도시침수","가뭄","산불","폭염","한파","물부족"],"title":"HazardType"},"HazardTypeInfo":{"properties":{"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"nameEn":{"type":"string","title":"Nameen"},"category":{"type":"string","title":"Category"},"description":{"type":"string","title":"Description"},"availableMetrics":{"items":{"type":"string"},"type":"array","title":"Availablemetrics","default":[]}},"type":"object","required":["code","name","nameEn","category","description"],"title":"HazardTypeInfo"},"HealthCheckResponse":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"agentStatus":{"type":"string","title":"Agentstatus"},"activeJobs":{"type":"integer","title":"Activejobs"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["status","version","agentStatus","activeJobs","timestamp"],"title":"HealthCheckResponse"},"JobType":{"type":"string","enum":["site_recommendation","bulk_analysis","data_export"],"title":"JobType","description":"작업 유형 (ERD batch_jobs 테이블 기준)"},"LocationData":{"properties":{"risks":{"items":{"$ref":"#/components/schemas/RiskData"},"type":"array","title":"Risks","description":"리스크별 분석 결과"}},"type":"object","required":["risks"],"title":"LocationData","description":"위치별 리스크 데이터"},"LongTermAAL":{"properties":{"year2020s":{"type":"number","title":"Year2020S"},"year2030s":{"type":"number","title":"Year2030S"},"year2040s":{"type":"number","title":"Year2040S"},"year2050s":{"type":"number","title":"Year2050S"}},"type":"object","required":["year2020s","year2030s","year2040s","year2050s"],"title":"LongTermAAL","description":"장기 AAL (연대별)"},"LongTermScore":{"properties":{"year2020s":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2020S"},"year2030s":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2030S"},"year2040s":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2040S"},"year2050s":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2050S"}},"type":"object","required":["year2020s","year2030s","year2040s","year2050s"],"title":"LongTermScore","description":"장기 리스크 점수 (연대별)"},"MidTermAAL":{"properties":{"year2026":{"type":"number","title":"Year2026"},"year2027":{"type":"number","title":"Year2027"},"year2028":{"type":"number","title":"Year2028"},"year2029":{"type":"number","title":"Year2029"},"year2030":{"type":"number","title":"Year2030"}},"type":"object","required":["year2026","year2027","year2028","year2029","year2030"],"title":"MidTermAAL","description":"중기 AAL (연도별)"},"MidTermScore":{"properties":{"year2026":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2026"},"year2027":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2027"},"year2028":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2028"},"year2029":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2029"},"year2030":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Year2030"}},"type":"object","required":["year2026","year2027","year2028","year2029","year2030"],"title":"MidTermScore","description":"중기 리스크 점수 (연도별)"},"PastEventsResponse":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"siteName":{"type":"string","title":"Sitename","description":"사업장 이름"},"disasters":{"items":{"$ref":"#/components/schemas/DisasterEvent"},"type":"array","title":"Disasters","description":"재난별 이력"}},"type":"object","required":["siteId","siteName","disasters"],"title":"PastEventsResponse","description":"Spring Boot API 호환 - 과거 재난 이력"},"PhysicalRiskBarItem":{"properties":{"riskType":{"$ref":"#/components/schemas/HazardType","description":"리스크 유형"},"riskScore":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Riskscore","description":"리스크 점수 (0-100)"},"financialLossRate":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Financiallossrate","description":"재무 손실률 (AAL, 0.0-1.0)"}},"type":"object","required":["riskType","riskScore","financialLossRate"],"title":"PhysicalRiskBarItem","description":"Spring Boot API 호환 - 물리적 리스크 점수"},"PhysicalRiskScoreResponse":{"properties":{"scenarios":{"items":{"$ref":"#/components/schemas/SSPScenarioScore"},"type":"array","title":"Scenarios","description":"SSP 시나리오별 리스크 점수 목록 (4개 시나리오)"}},"type":"object","required":["scenarios"],"title":"PhysicalRiskScoreResponse","description":"Spring Boot API 호환 - 시나리오별 물리적 리스크 점수"},"Priority":{"type":"string","enum":["low","normal","high"],"title":"Priority"},"RecommendedSite":{"properties":{"rank":{"type":"integer","minimum":1.0,"title":"Rank","description":"순위"},"grid_id":{"type":"integer","title":"Grid Id"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"location_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Name"},"total_risk_score":{"type":"number","title":"Total Risk Score","description":"종합 리스크 점수 (낮을수록 좋음)"},"hazard_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Hazard Scores","description":"9개 리스크별 Hazard 점수"},"exposure_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Exposure Scores","description":"9개 리스크별 Exposure 점수"},"vulnerability_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Vulnerability Scores","description":"9개 리스크별 Vulnerability 점수"},"aal_total":{"type":"number","title":"Aal Total","description":"총 AAL (%)"},"expected_loss":{"type":"number","title":"Expected Loss","description":"예상 손실액 (원)"}},"type":"object","required":["rank","grid_id","latitude","longitude","total_risk_score","hazard_scores","exposure_scores","vulnerability_scores","aal_total","expected_loss"],"title":"RecommendedSite","description":"추천 후보지 정보","example":{"aal_total":1.25,"expected_loss":625000000,"exposure_scores":{"drought":0.55,"extreme_cold":0.6,"extreme_heat":0.65,"river_flood":0.48,"sea_level_rise":0.4,"typhoon":0.62,"urban_flood":0.68,"water_stress":0.52,"wildfire":0.3},"grid_id":12345,"hazard_scores":{"drought":0.28,"extreme_cold":0.38,"extreme_heat":0.45,"river_flood":0.25,"sea_level_rise":0.15,"typhoon":0.38,"urban_flood":0.42,"water_stress":0.33,"wildfire":0.12},"latitude":37.5665,"location_name":"서울특별시 중구","longitude":126.978,"rank":1,"total_risk_score":35.2,"vulnerability_scores":{"drought":50.0,"extreme_cold":55.0,"extreme_heat":65.0,"river_flood":52.0,"sea_level_rise":40.0,"typhoon":60.0,"urban_flood":70.0,"water_stress":48.0,"wildfire":35.0}}},"RelocationSimulationRequest":{"properties":{"currentSiteId":{"type":"string","format":"uuid","title":"Currentsiteid","description":"현재 사업장 ID"},"latitude":{"type":"number","title":"Latitude","description":"이전될 위치의 위도"},"longitude":{"type":"number","title":"Longitude","description":"이전될 위치의 경도"},"roadAddress":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Roadaddress","description":"이전될 위치의 도로명 주소"},"jibunAddress":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Jibunaddress","description":"이전될 위치의 지번 주소"}},"type":"object","required":["currentSiteId","latitude","longitude"],"title":"RelocationSimulationRequest","description":"Spring Boot API 호환 - 사업장 이전 시뮬레이션 요청"},"RelocationSimulationResponse":{"properties":{"currentLocation":{"$ref":"#/components/schemas/LocationData"},"newLocation":{"$ref":"#/components/schemas/LocationData"}},"type":"object","required":["currentLocation","newLocation"],"title":"RelocationSimulationResponse","description":"Spring Boot API 호환 - 사업장 이전 시뮬레이션 결과"},"ReportLanguage":{"type":"string","enum":["ko","en"],"title":"ReportLanguage","description":"보고서 언어"},"RiskData":{"properties":{"riskType":{"type":"string","title":"Risktype","description":"리스크 유형"},"riskScore":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Riskscore","description":"리스크 점수 (0-100)"},"aal":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Aal","description":"AAL (연평균 자산 손실률, 0.0-1.0)"}},"type":"object","required":["riskType","riskScore","aal"],"title":"RiskData","description":"리스크별 데이터"},"RiskVulnerability":{"properties":{"riskType":{"type":"string","title":"Risktype","description":"리스크 유형"},"vulnerabilityScore":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Vulnerabilityscore","description":"취약성 점수 (0-100)"}},"type":"object","required":["riskType","vulnerabilityScore"],"title":"RiskVulnerability","description":"리스크별 취약성"},"SSPScenario":{"type":"string","enum":["SSP1-2.6","SSP2-4.5","SSP3-7.0","SSP5-8.5"],"title":"SSPScenario"},"SSPScenarioImpact":{"properties":{"scenario":{"$ref":"#/components/schemas/SSPScenario"},"riskType":{"$ref":"#/components/schemas/HazardType","description":"리스크 종류"},"shortTerm":{"$ref":"#/components/schemas/ShortTermAAL"},"midTerm":{"$ref":"#/components/schemas/MidTermAAL"},"longTerm":{"$ref":"#/components/schemas/LongTermAAL"}},"type":"object","required":["scenario","riskType","shortTerm","midTerm","longTerm"],"title":"SSPScenarioImpact","description":"SSP 시나리오별 재무 영향"},"SSPScenarioScore":{"properties":{"scenario":{"$ref":"#/components/schemas/SSPScenario"},"riskType":{"$ref":"#/components/schemas/HazardType","description":"리스크 종류"},"shortTerm":{"$ref":"#/components/schemas/ShortTermScore"},"midTerm":{"$ref":"#/components/schemas/MidTermScore"},"longTerm":{"$ref":"#/components/schemas/LongTermScore"}},"type":"object","required":["scenario","riskType","shortTerm","midTerm","longTerm"],"title":"SSPScenarioScore","description":"SSP 시나리오별 리스크 점수"},"ShortTermAAL":{"properties":{"q1":{"type":"number","title":"Q1","description":"1분기 AAL"},"q2":{"type":"number","title":"Q2","description":"2분기 AAL"},"q3":{"type":"number","title":"Q3","description":"3분기 AAL"},"q4":{"type":"number","title":"Q4","description":"4분기 AAL"}},"type":"object","required":["q1","q2","q3","q4"],"title":"ShortTermAAL","description":"단기 AAL (분기별)"},"ShortTermScore":{"properties":{"q1":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Q1","description":"1분기 점수"},"q2":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Q2","description":"2분기 점수"},"q3":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Q3","description":"3분기 점수"},"q4":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Q4","description":"4분기 점수"}},"type":"object","required":["q1","q2","q3","q4"],"title":"ShortTermScore","description":"단기 리스크 점수 (분기별)"},"SiteData":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"siteName":{"type":"string","title":"Sitename","description":"사업장 이름"},"riskScore":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Riskscore","description":"리스크 점수 (0-100)"},"localAverageTemperature":{"type":"number","title":"Localaveragetemperature","description":"사업장 위치 평균 기온 (°C)"}},"type":"object","required":["siteId","siteName","riskScore","localAverageTemperature"],"title":"SiteData","description":"사업장 데이터"},"SiteInfo":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"address":{"type":"string","title":"Address","description":"주소 (도로명 우선, 없으면 지번)"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"industry":{"type":"string","title":"Industry","description":"산업 분류 (data_center, factory, office, warehouse, retail)"}},"type":"object","required":["id","name","address","latitude","longitude","industry"],"title":"SiteInfo","description":"사업장 정보 (Spring Boot API 문서 스펙 기준)"},"SiteRecommendationBatchResponse":{"properties":{"batchId":{"type":"string","format":"uuid","title":"Batchid","description":"배치 작업 ID"},"status":{"$ref":"#/components/schemas/BatchStatus","description":"작업 상태"},"estimatedDurationMinutes":{"type":"integer","title":"Estimateddurationminutes","description":"예상 소요 시간 (분)"},"statusUrl":{"type":"string","title":"Statusurl","description":"진행 상태 조회 URL"},"createdAt":{"type":"string","format":"date-time","title":"Createdat"}},"type":"object","required":["batchId","status","estimatedDurationMinutes","statusUrl"],"title":"SiteRecommendationBatchResponse","description":"배치 작업 시작 응답","example":{"batchId":"550e8400-e29b-41d4-a716-446655440000","createdAt":"2025-12-01T10:30:00Z","estimatedDurationMinutes":30,"status":"queued","statusUrl":"/api/recommendation/batch/550e8400-e29b-41d4-a716-446655440000/progress"}},"SiteRecommendationRequest":{"properties":{"scenario_id":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Scenario Id","description":"SSP 시나리오 ID (1-4)"},"start_year":{"type":"integer","maximum":2100.0,"minimum":2025.0,"title":"Start Year","default":2025},"end_year":{"type":"integer","maximum":2100.0,"minimum":2025.0,"title":"End Year","default":2050},"building_info":{"additionalProperties":true,"type":"object","title":"Building Info","description":"건물 정보 (취약성 계산용)"},"asset_info":{"additionalProperties":true,"type":"object","title":"Asset Info","description":"자산 정보"},"top_n":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Top N","description":"추천할 상위 격자 수","default":3},"additional_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Additional Data","description":"추가 데이터 (자유 형식)"}},"type":"object","required":["scenario_id","building_info","asset_info"],"title":"SiteRecommendationRequest","description":"후보지 추천 배치 작업 시작 요청","example":{"additional_data":{"metadata":{"source":"user_input","timestamp":"2025-12-01"},"raw_text":"건물 리모델링 2023년 완료, 태양광 패널 200kW 설치 예정"},"asset_info":{"floor_area":5000.0,"insurance_coverage_rate":0.7,"total_asset_value":50000000000},"building_info":{"building_age":25,"fire_access":true,"floors_above":10,"floors_below":2,"has_piloti":false,"has_seismic_design":true,"main_purpose":"업무시설","structure":"철근콘크리트"},"end_year":2050,"scenario_id":2,"start_year":2025,"top_n":3}},"SiteRecommendationResultResponse":{"properties":{"batchId":{"type":"string","format":"uuid","title":"Batchid"},"jobType":{"$ref":"#/components/schemas/JobType"},"status":{"$ref":"#/components/schemas/BatchStatus"},"scenarioId":{"type":"integer","title":"Scenarioid"},"scenarioName":{"type":"string","title":"Scenarioname"},"totalItems":{"type":"integer","title":"Totalitems","description":"전체 분석 격자 수"},"completedItems":{"type":"integer","title":"Completeditems","description":"완료 항목 수"},"failedItems":{"type":"integer","title":"Faileditems","description":"실패 항목 수"},"recommendedSites":{"items":{"$ref":"#/components/schemas/RecommendedSite"},"type":"array","title":"Recommendedsites"},"completedAt":{"type":"string","format":"date-time","title":"Completedat"},"actualDurationSeconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Actualdurationseconds"}},"type":"object","required":["batchId","jobType","status","scenarioId","scenarioName","totalItems","completedItems","failedItems","recommendedSites","completedAt"],"title":"SiteRecommendationResultResponse","description":"후보지 추천 결과 응답 (ERD batch_jobs 기반)","example":{"actualDurationSeconds":1800,"batchId":"550e8400-e29b-41d4-a716-446655440000","completedAt":"2025-12-01T11:00:00Z","completedItems":9990,"failedItems":10,"jobType":"site_recommendation","recommendedSites":[{"aal_total":1.25,"expected_loss":625000000,"grid_id":12345,"latitude":37.5665,"longitude":126.978,"rank":1,"total_risk_score":35.2}],"scenarioId":2,"scenarioName":"SSP2-4.5","status":"completed","totalItems":10000}},"SiteSummary":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"siteName":{"type":"string","title":"Sitename","description":"사업장 이름"},"siteType":{"type":"string","title":"Sitetype","description":"사업장 유형"},"latitude":{"type":"number","title":"Latitude","description":"위도"},"longitude":{"type":"number","title":"Longitude","description":"경도"},"location":{"type":"string","title":"Location","description":"위치"},"totalRiskScore":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Totalriskscore","description":"통합 리스크 점수 (0-100)"}},"type":"object","required":["siteId","siteName","siteType","latitude","longitude","location","totalRiskScore"],"title":"SiteSummary","description":"사업장 요약 정보"},"StartAnalysisRequest":{"properties":{"site":{"$ref":"#/components/schemas/SiteInfo","description":"사업장 정보"},"hazardTypes":{"items":{"type":"string"},"type":"array","title":"Hazardtypes","description":"분석할 위험 유형 목록"},"priority":{"anyOf":[{"$ref":"#/components/schemas/Priority"},{"type":"null"}],"description":"작업 우선순위","default":"normal"},"options":{"anyOf":[{"$ref":"#/components/schemas/AnalysisOptions"},{"type":"null"}],"description":"분석 옵션"}},"type":"object","required":["site","hazardTypes"],"title":"StartAnalysisRequest","description":"Spring Boot API 호환 - 분석 시작 요청 (문서 스펙 기준)"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VulnerabilityResponse":{"properties":{"siteId":{"type":"string","format":"uuid","title":"Siteid","description":"사업장 ID"},"vulnerabilities":{"items":{"$ref":"#/components/schemas/RiskVulnerability"},"type":"array","title":"Vulnerabilities","description":"리스크별 취약성 점수"}},"type":"object","required":["siteId","vulnerabilities"],"title":"VulnerabilityResponse","description":"Spring Boot API 호환 - 취약성 분석"},"YearlyData":{"properties":{"year":{"type":"integer","title":"Year","description":"연도"},"nationalAverageTemperature":{"type":"number","title":"Nationalaveragetemperature","description":"전국 평균 기온 (°C)"},"sites":{"items":{"$ref":"#/components/schemas/SiteData"},"type":"array","title":"Sites","description":"사업장별 데이터"}},"type":"object","required":["year","nationalAverageTemperature","sites"],"title":"YearlyData","description":"연도별 데이터"}}}}